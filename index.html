import React, { useState, useCallback, useEffect } from 'react';
import {
  ShieldCheck, Home, User, FileText, AlertCircle, CheckCircle2,
  ChevronDown, Mail, Instagram, Scale, Gavel, Briefcase, Users,
  ScrollText, Archive, MousePointerClick, Check, MessageSquareQuote,
  Droplets, Zap, Paintbrush, Receipt, ShieldAlert, Menu, X, MessageCircle
} from 'lucide-react';

const colors = {
  gold: '#C5A059',
  black: '#1A1A1A',
  grayLight: '#F5F5F5',
  grayDark: '#3A3A3A',
  white: '#FFFFFF'
};

const faqData = [
  {
    q: "O proprietário pode ingressar no imóvel sem autorização prévia?",
    a: "Não. A posse direta pertence ao locatário (art. 23, IX). O ingresso do locador depende de consentimento expresso ou aviso prévio com dia e hora marcados."
  },
  {
    q: "A pintura nova na entrega das chaves é obrigatória?",
    a: "Não necessariamente. A devolução deve ocorrer no estado em que o imóvel foi recebido, ressalvado o desgaste natural do uso."
  },
  {
    q: "Quem responde por vazamentos e infiltrações?",
    a: "Problemas estruturais são responsabilidade do locador. Danos decorrentes de uso ou falta de manutenção superficial cabem ao locatário."
  },
  {
    q: "Como funciona a multa por rescisão antecipada?",
    a: "A multa deve ser proporcional ao tempo restante do contrato, conforme o art. 4º da Lei do Inquilinato."
  },
  {
    q: "IPTU e seguro incêndio podem ser repassados?",
    a: "Sim, desde que haja cláusula contratual expressa prevendo a transferência do encargo."
  }
];

const pilaresData = [
  {
    id: 1,
    title: "Segurança Jurídica",
    desc: "A fundação de qualquer negócio imobiliário.",
    items: [
      "Contratos personalizados e atualizados",
      "Aderência à Lei do Inquilinato",
      "Mitigação de riscos patrimoniais"
    ],
    footer: "A segurança começa na elaboração.",
    icon: <ShieldCheck size={24} />
  },
  {
    id: 2,
    title: "Clareza Contratual",
    desc: "O que é claro não gera litígio.",
    items: [
      "Direitos e deveres objetivos",
      "Regras claras de conservação",
      "Linguagem técnica e acessível"
    ],
    footer: "Contratos transparentes protegem.",
    icon: <ScrollText size={24} />
  },
  {
    id: 3,
    title: "Responsabilidade",
    desc: "Equilíbrio entre deveres.",
    items: [
      "Encargos proporcionais",
      "Zelo contínuo",
      "Conduta ética"
    ],
    footer: "A harmonia depende das partes.",
    icon: <Users size={24} />
  }
];

const Logo = ({ small = false }) => (
  <div className="flex justify-center">
    <div
      className={`border-2 rounded-full flex items-center justify-center
      ${small ? 'w-10 h-10' : 'w-24 h-24'}`}
      style={{ borderColor: colors.gold }}
    >
      <span
        className={`font-serif tracking-tight ${small ? 'text-base' : 'text-4xl'}`}
        style={{ color: colors.gold }}
      >
        GM
      </span>
    </div>
  </div>
);

export default function App() {
  const [activeFaq, setActiveFaq] = useState(null);
  const [selectedPilar, setSelectedPilar] = useState(pilaresData[0]);
  const [scrolled, setScrolled] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 80);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const toggleFaq = useCallback(
    (i) => setActiveFaq(activeFaq === i ? null : i),
    [activeFaq]
  );

  const scrollTo = (id) => {
    document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
    setIsMenuOpen(false);
  };

  return (
    <div className="font-sans" style={{ backgroundColor: colors.grayLight }}>
      
      {/* NAVBAR */}
      <header className={`fixed w-full z-50 transition-all ${scrolled ? 'bg-white shadow py-3' : 'py-6'}`}>
        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
          <div onClick={() => scrollTo('top')} className="cursor-pointer">
            <Logo small />
          </div>

          <nav className="hidden md:flex gap-8 text-xs uppercase tracking-widest">
            {['pilares', 'deveres', 'faq', 'checklist', 'contato'].map(item => (
              <button
                key={item}
                onClick={() => scrollTo(item)}
                className={scrolled ? 'text-black' : 'text-white'}
              >
                {item}
              </button>
            ))}
          </nav>

          <button className="md:hidden" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X /> : <Menu />}
          </button>
        </div>
      </header>

      {/* HERO */}
      <section id="top" className="min-h-screen flex items-center justify-center bg-black text-center px-6">
        <div className="border p-16 animate-in fade-in zoom-in" style={{ borderColor: colors.gold }}>
          <Logo />
          <h1 className="text-4xl md:text-6xl font-serif text-white mt-8">
            Cartilha de Obrigações<br />
            <span style={{ color: colors.gold }}>Locador & Locatário</span>
          </h1>
          <p className="text-gray-400 mt-6 italic">
            Diretrizes jurídicas preventivas para locações urbanas
          </p>
        </div>
      </section>

      {/* PILARES */}
      <section id="pilares" className="py-32 px-6 bg-white">
        <div className="max-w-6xl mx-auto grid lg:grid-cols-3 gap-12">
          <div className="space-y-4">
            {pilaresData.map(p => (
              <button
                key={p.id}
                onClick={() => setSelectedPilar(p)}
                className={`w-full p-5 rounded-xl border-l-4 text-left ${
                  selectedPilar.id === p.id ? 'bg-gray-50' : ''
                }`}
                style={{ borderLeftColor: colors.gold }}
              >
                <div className="flex gap-4 items-center">
                  {p.icon}
                  <span className="font-serif">{p.title}</span>
                </div>
              </button>
            ))}
          </div>

          <div className="lg:col-span-2 bg-gray-50 p-12 rounded-3xl animate-in fade-in">
            <h3 className="text-3xl font-serif">{selectedPilar.title}</h3>
            <p className="italic mt-2" style={{ color: colors.gold }}>
              {selectedPilar.desc}
            </p>

            <ul className="mt-8 space-y-4">
              {selectedPilar.items.map((i, idx) => (
                <li key={idx} className="flex gap-3">
                  <Check style={{ color: colors.gold }} />
                  {i}
                </li>
              ))}
            </ul>

            <p className="mt-10 text-xs uppercase text-gray-400">
              {selectedPilar.footer}
            </p>
          </div>
        </div>
      </section>

      {/* FAQ */}
      <section id="faq" className="py-32 px-6 bg-gray-50">
        <div className="max-w-4xl mx-auto space-y-4">
          {faqData.map((f, i) => (
            <div key={i} className="bg-white border rounded-xl">
              <button
                onClick={() => toggleFaq(i)}
                className="w-full p-6 flex justify-between text-left"
              >
                <span className="font-serif">{f.q}</span>
                <ChevronDown />
              </button>
              {activeFaq === i && (
                <div className="px-6 pb-6 text-gray-600 italic">
                  {f.a}
                </div>
              )}
            </div>
          ))}
        </div>
      </section>

      {/* FOOTER */}
      <footer id="contato" className="py-32 bg-black text-center text-white px-6">
        <Logo />
        <p className="mt-10 text-gray-400 max-w-xl mx-auto">
          Advocacia imobiliária estratégica voltada à prevenção de conflitos e proteção patrimonial.
        </p>

        <div className="mt-12 space-y-4">
          <a href="https://wa.me/5511999325205" className="flex justify-center gap-3">
            <MessageCircle style={{ color: colors.gold }} /> (11) 99932-5205
          </a>
          <a href="mailto:gabrielamacedo.adv@outlook.com" className="flex justify-center gap-3">
            <Mail style={{ color: colors.gold }} /> gabrielamacedo.adv@outlook.com
          </a>
          <a href="https://instagram.com/gabrielamacedo.adv" className="flex justify-center gap-3">
            <Instagram style={{ color: colors.gold }} /> @gabrielamacedo.adv
          </a>
        </div>
      </footer>
    </div>
  );
}
